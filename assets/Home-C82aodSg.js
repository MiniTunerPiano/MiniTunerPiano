var yn=Object.defineProperty;var hn=(e,t,n)=>t in e?yn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Q=(e,t,n)=>hn(e,typeof t!="symbol"?t+"":t,n);import{c as J}from"./_commonjsHelpers-Cpj98o6Y.js";import{i as Pt,e as Rt,d as ce,r as C,p as re,m as gn,a as Ne,b as Mt,c as Sn,f as wn,g as bn,h as pn,j as Xe,k as Lt,l as Ee,n as Tt,u as xt,t as _t,o as An,q as kt,s as En,v as Cn,w as On,x as Fn,y as Qe,z as E,I as me,A as Je,B as $,C as ie,D as Pn,E as ft,F as $e,G as Ve,H as vt,J as N,K as Ze,L as dt,M as ae,N as mt,O as Ke,P as qt,Q as Rn,R as Ie,S as Nt,T as yt,U as j,V as Mn,W as ge,X as Ln,Y as Tn,Z as It,_ as xn,$ as _n,a0 as kn,a1 as qn,a2 as Dt,a3 as Nn,a4 as In,a5 as Dn,a6 as $n,a7 as Vn,a8 as Bn,a9 as jn,aa as Un,ab as pe,ac as Wn,ad as Hn,ae as Gn,af as zn,ag as Ce,ah as L,ai as H,aj as k,ak as z,al as W,am as $t,an as B,ao as He,ap as ee,aq as K,ar as se,as as ve,at as De,au as et,av as Vt,aw as Oe,ax as ht,ay as Yn}from"./index-CCkN365B.js";class de{constructor(t){let{x:n,y:s,width:o,height:a}=t;this.x=n,this.y=s,this.width=o,this.height=a}get top(){return this.y}get bottom(){return this.y+this.height}get left(){return this.x}get right(){return this.x+this.width}}function gt(e,t){return{x:{before:Math.max(0,t.left-e.left),after:Math.max(0,e.right-t.right)},y:{before:Math.max(0,t.top-e.top),after:Math.max(0,e.bottom-t.bottom)}}}function Xn(e){return Array.isArray(e)?new de({x:e[0],y:e[1],width:0,height:0}):e.getBoundingClientRect()}function Qn(e){const t=e.getBoundingClientRect(),n=getComputedStyle(e),s=n.transform;if(s){let o,a,i,r,l;if(s.startsWith("matrix3d("))o=s.slice(9,-1).split(/, /),a=+o[0],i=+o[5],r=+o[12],l=+o[13];else if(s.startsWith("matrix("))o=s.slice(7,-1).split(/, /),a=+o[0],i=+o[3],r=+o[4],l=+o[5];else return new de(t);const u=n.transformOrigin,c=t.x-r-(1-a)*parseFloat(u),v=t.y-l-(1-i)*parseFloat(u.slice(u.indexOf(" ")+1)),f=a?t.width/a:e.offsetWidth+1,S=i?t.height/i:e.offsetHeight+1;return new de({x:c,y:v,width:f,height:S})}else return new de(t)}function Jn(e,t,n){if(typeof e.animate>"u")return{finished:Promise.resolve()};let s;try{s=e.animate(t,n)}catch{return{finished:Promise.resolve()}}return typeof s.finished>"u"&&(s.finished=new Promise(o=>{s.onfinish=()=>{o(s)}})),s}const Fe=new WeakMap;function Zn(e,t){Object.keys(t).forEach(n=>{if(Pt(n)){const s=Rt(n),o=Fe.get(e);if(t[n]==null)o==null||o.forEach(a=>{const[i,r]=a;i===s&&(e.removeEventListener(s,r),o.delete(a))});else if(!o||![...o].some(a=>a[0]===s&&a[1]===t[n])){e.addEventListener(s,t[n]);const a=o||new Set;a.add([s,t[n]]),Fe.has(e)||Fe.set(e,a)}}else t[n]==null?e.removeAttribute(n):e.setAttribute(n,t[n])})}function Kn(e,t){Object.keys(t).forEach(n=>{if(Pt(n)){const s=Rt(n),o=Fe.get(e);o==null||o.forEach(a=>{const[i,r]=a;i===s&&(e.removeEventListener(s,r),o.delete(a))})}else e.removeAttribute(n)})}function Bt(e){if(typeof e.getRootNode!="function"){for(;e.parentNode;)e=e.parentNode;return e!==document?null:document}const t=e.getRootNode();return t!==document&&t.getRootNode({composed:!0})!==document?null:t}const ea="cubic-bezier(0.4, 0, 0.2, 1)";function ta(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(;e;){if(t?na(e):tt(e))return e;e=e.parentElement}return document.scrollingElement}function Me(e,t){const n=[];if(t&&e&&!t.contains(e))return n;for(;e&&(tt(e)&&n.push(e),e!==t);)e=e.parentElement;return n}function tt(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return t.overflowY==="scroll"||t.overflowY==="auto"&&e.scrollHeight>e.clientHeight}function na(e){if(!e||e.nodeType!==Node.ELEMENT_NODE)return!1;const t=window.getComputedStyle(e);return["scroll","auto"].includes(t.overflowY)}function aa(e){for(;e;){if(window.getComputedStyle(e).position==="fixed")return!0;e=e.offsetParent}return!1}var fe={},nt={},Le=J&&J.__assign||function(){return Le=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Le.apply(this,arguments)};Object.defineProperty(nt,"__esModule",{value:!0});var ra={threshold:.1,sampleRate:44100,probabilityThreshold:.1};function oa(e){e===void 0&&(e={});var t=Le(Le({},ra),e),n=t.threshold,s=t.sampleRate,o=t.probabilityThreshold;return function(i){var r;for(r=1;r<i.length;r*=2);r/=2;for(var l=r/2,u=new Float32Array(l),c=0,v,f=0;f<l;f++)u[f]=0;for(var f=1;f<l;f++)for(var S=0;S<l;S++){var b=i[S]-i[S+f];u[f]+=b*b}u[0]=1,u[1]=1;for(var h=0,f=1;f<l;f++)h+=u[f],u[f]*=f/h;for(v=2;v<l;v++)if(u[v]<n){for(;v+1<l&&u[v+1]<u[v];)v++;c=1-u[v];break}if(v===l||u[v]>=n||c<o)return null;var A,d,y;if(v<1?d=v:d=v-1,v+1<l?y=v+1:y=v,d===v)u[v]<=u[y]?A=v:A=y;else if(y===v)u[v]<=u[d]?A=v:A=d;else{var m=u[d],g=u[v],p=u[y];A=v+(p-m)/(2*(2*g-p-m))}return s/A}}nt.YIN=oa;var at={},Te=J&&J.__assign||function(){return Te=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},Te.apply(this,arguments)};Object.defineProperty(at,"__esModule",{value:!0});var sa={sampleRate:44100,minFrequency:82,maxFrequency:1e3,ratio:5,sensitivity:.1};function ia(e){e===void 0&&(e={});var t=Te(Te({},sa),e),n=t.sampleRate,s=t.minFrequency,o=t.maxFrequency,a=t.sensitivity,i=t.ratio,r=[],l=Math.ceil(n/s),u=Math.floor(n/o);return function(v){var f=v.length,S=0,b=1/0,h=-1/0,A,d,y,m,g,p,O,F;for(m=0;m<f;m++)if(u<=m&&m<=l){for(O=0,F=m,S=0,A=[],d=[];O<f-m;S++,F++,O++)A[S]=v[O],d[S]=v[F];var w=A.length;for(y=[],p=0;p<w;p++)y[p]=A[p]-d[p];var I=0;for(p=0;p<w;p++)I+=Math.abs(y[p]);r[m]=I}for(g=u;g<l;g++)r[g]<b&&(b=r[g]),r[g]>h&&(h=r[g]);var Y=Math.round(a*(h-b)+b);for(g=u;g<=l&&r[g]>Y;g++);var q=u/2;b=r[g];var P=g;for(m=g-1;m<g+q&&m<=l;m++)r[m]<b&&(b=r[m],P=m);return Math.round(r[P]*i)<h?n/P:null}}at.AMDF=ia;var rt={},xe=J&&J.__assign||function(){return xe=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},xe.apply(this,arguments)};Object.defineProperty(rt,"__esModule",{value:!0});var St={sampleRate:44100};function la(e){e===void 0&&(e=St);var t=xe(xe({},St),e),n=t.sampleRate;return function(o){var a=o.length,i=0,r,l,u,c;for(r=0;r<a;r++)c=o[r],i+=c*c;if(i=Math.sqrt(i/a),i<.01)return-1;var v=0,f=a-1,S=.2;for(r=0;r<a/2;r++)if(Math.abs(o[r])<S){v=r;break}for(r=1;r<a/2;r++)if(Math.abs(o[a-r])<S){f=a-r;break}var b=o.slice(v,f),h=b.length,A=new Array(h).fill(0);for(r=0;r<h;r++)for(l=0;l<h-r;l++)A[r]=A[r]+b[l]*b[l+r];for(u=0;A[u]>A[u+1];)u++;var d=-1,y=-1;for(r=u;r<h;r++)A[r]>d&&(d=A[r],y=r);var m=y,g=A[m-1],p=A[m],O=A[m+1],F=(g+O-2*p)/2,w=(O-g)/2;return F&&(m=m-w/(2*F)),n/m}}rt.ACF2PLUS=la;var ot={},_e=J&&J.__assign||function(){return _e=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},_e.apply(this,arguments)};Object.defineProperty(ot,"__esModule",{value:!0});var ua=6,ca=3e3,fa=3,va=.75,da={sampleRate:44100};function ma(e){e===void 0&&(e={});var t=_e(_e({},da),e),n=t.sampleRate;return function(o){for(var a=[],i=[],r=o.length,l=null,u=0,c=0,v=0,f=0;f<r;f++){var S=o[f];u=u+S,v=Math.max(v,S),c=Math.min(c,S)}u/=r,c-=u,v-=u;for(var b=v>-1*c?v:-1*c,h=b*va,A=0,d=-1,y=o.length,m,g,p;m=~~(n/(Math.pow(2,A)*ca)),!(y<2);){var O=void 0,F=-1e3,w=-1e6,I=-1e6,Y=!1,q=!1;p=0,g=0;for(var f=2;f<y;f++){var P=o[f]-u,R=o[f-1]-u;R<=0&&P>0&&(Y=!0),R>=0&&P<0&&(q=!0),O=P-R,F>-1e3&&(q&&F<0&&O>=0&&Math.abs(P)>=h&&f>w+m&&(a[p++]=f,w=f,q=!1),Y&&F>0&&O<=0&&Math.abs(P)>=h&&f>I+m&&(i[g++]=f,I=f,Y=!1)),F=O}if(p===0&&g===0)break;for(var x=void 0,V=[],f=0;f<y;f++)V[f]=0;for(var f=0;f<p;f++)for(var T=1;T<fa;T++)f+T<p&&(x=Math.abs(a[f]-a[f+T]),V[x]+=1);for(var U=-1,D=-1,f=0;f<y;f++){for(var G=0,T=-1*m;T<=m;T++)f+T>=0&&f+T<y&&(G+=V[f+T]);G===D?f===2*U&&(U=f):G>D&&(D=G,U=f)}for(var Z=0,oe=0,T=-m;T<=m;T++)if(U+T>=0&&U+T<r){var ye=V[U+T];ye>0&&(oe+=ye,Z+=(U+T)*ye)}if(Z/=oe,d>-1&&Math.abs(Z*2-d)<=2*m){l=n/(Math.pow(2,A-1)*d);break}if(d=Z,A++,A>=ua||y<2)break;var le=o.subarray(0);y===V.length&&(le=new Float32Array(y/2));for(var f=0;f<y/2;f++)le[f]=(o[2*f]+o[2*f+1])/2;o=le,y/=2}return l}}ot.DynamicWavelet=ma;var st={},ke=J&&J.__assign||function(){return ke=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},ke.apply(this,arguments)};Object.defineProperty(st,"__esModule",{value:!0});var ya={bufferSize:1024,cutoff:.97,sampleRate:44100};function ha(e){e===void 0&&(e={});var t=ke(ke({},ya),e),n=t.bufferSize,s=t.cutoff,o=t.sampleRate,a=.5,i=80,r=new Float32Array(n),l=new Float32Array(n),u,c,v=[],f=[],S=[];function b(d){var y,m;l[0]=d[0]*d[0];for(var g=1;g<d.length;g+=1)l[g]=d[g]*d[g]+l[g-1];for(var p=0;p<d.length;p++){y=0,m=l[d.length-1-p]+l[d.length-1]-l[p];for(var g=0;g<d.length-p;g++)y+=d[g]*d[g+p];r[p]=2*y/m}}function h(d){var y=r[d-1],m=r[d],g=r[d+1],p=d,O=g+y-2*m;if(O===0)u=p,c=m;else{var F=y-g;u=p+F/(2*O),c=m-F*F/(8*O)}}function A(){for(var d=0,y=0;d<(r.length-1)/3&&r[d]>0;)d++;for(;d<r.length-1&&r[d]<=0;)d++;for(d==0&&(d=1);d<r.length-1;)if(r[d]>r[d-1]&&r[d]>=r[d+1]&&(y==0||r[d]>r[y])&&(y=d),d++,d<r.length-1&&r[d]<=0)for(y>0&&(v.push(y),y=0);d<r.length-1&&r[d]<=0;)d++;y>0&&v.push(y)}return function(y){var m;v=[],f=[],S=[],b(y),A();for(var g=-1/0,p=0;p<v.length;p++){var O=v[p];g=Math.max(g,r[O]),r[O]>a&&(h(O),S.push(c),f.push(u),g=Math.max(g,c))}if(f.length){for(var F=s*g,w=0,p=0;p<S.length;p++)if(S[p]>=F){w=p;break}var I=f[w],Y=o/I;Y>i?m=Y:m=-1}else m=-1;return{probability:g,freq:m}}}st.Macleod=ha;var jt={};(function(e){var t=J&&J.__assign||function(){return t=Object.assign||function(o){for(var a,i=1,r=arguments.length;i<r;i++){a=arguments[i];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(o[l]=a[l])}return o},t.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.DEFAULT_FREQUENCIES_PARAMS={tempo:120,quantization:4,sampleRate:44100};function n(o,a){var i=o.map(function(S){return S(a)}).filter(function(S){return S!==null}).sort(function(S,b){return S-b});if(i.length===1)return i[0];if(i.length===2){var r=i[0],l=i[1];return r*2>l?Math.sqrt(r*l):r}else{var r=i[0],l=i[1],u=i[i.length-2],c=i[i.length-1],v=r*2>l?i:i.slice(1),f=u*2>c?v:v.slice(0,-1);return Math.pow(f.reduce(function(h,A){return h*A},1),1/f.length)}}function s(o,a,i){i===void 0&&(i={});var r=t(t({},e.DEFAULT_FREQUENCIES_PARAMS),i),l=r.tempo,u=r.quantization,c=r.sampleRate,v=a.length,f=Math.round(c*60/(u*l)),S;Array.isArray(o)?S=n.bind(null,o):S=o;for(var b=[],h=0,A=v-f;h<=A;h+=f){var d=a.slice(h,h+f),y=S(d);b.push(y)}return b}e.frequencies=s})(jt);Object.defineProperty(fe,"__esModule",{value:!0});var Ut=nt;fe.YIN=Ut.YIN;var Wt=at;fe.AMDF=Wt.AMDF;var Ht=rt;fe.ACF2PLUS=Ht.ACF2PLUS;var Gt=ot;fe.DynamicWavelet=Gt.DynamicWavelet;var zt=st;fe.Macleod=zt.Macleod;var Yt=jt;fe.frequencies=Yt.frequencies;var ga=fe.default={YIN:Ut.YIN,AMDF:Wt.AMDF,ACF2PLUS:Ht.ACF2PLUS,DynamicWavelet:Gt.DynamicWavelet,Macleod:zt.Macleod,frequencies:Yt.frequencies};const ne=class ne{};Q(ne,"IsOnRange",(t,n,s)=>s<n&&s>t),Q(ne,"Clamp",(t,n=0,s=1)=>Math.min(s,Math.max(n,t))),Q(ne,"Lerp",(t,n,s)=>t*(1-s)+n*s),Q(ne,"Invlerp",(t,n,s)=>ne.Clamp((s-t)/(n-t))),Q(ne,"ToRange",(t,n,s,o=0,a=1)=>ne.Lerp(o,a,ne.Invlerp(n,s,t)));let Se=ne;class M{constructor(t,n,s){Q(this,"$natural",!0);Q(this,"name",{classic:M.Classic.ENotes.NONE,american:M.American.ENotes.NONE});Q(this,"frequency",{main:0,min:0,max:0});Q(this,"isNatural",()=>this.$natural);this.frequency.main=t,n&&(this.name.classic=n),s&&(this.name.american=s)}}class te extends M{constructor(n,s=M.Classic.ENotes.NONE,o=M.American.ENotes.NONE){super(n,s,o);Q(this,"sharp",M.EmptyNote);Q(this,"flat",M.EmptyNote);this.$natural=!1}}(e=>{(a=>{a[a.CLASSIC=0]="CLASSIC",a[a.AMERICAN=1]="AMERICAN"})(e.Systems||(e.Systems={})),(a=>{a[a.SHARP=0]="SHARP",a[a.FLAT=1]="FLAT",a[a.NATURAL=2]="NATURAL",a[a.DOUBLE_SHARP=3]="DOUBLE_SHARP",a[a.DOUBLE_FLAT=4]="DOUBLE_FLAT"})(e.Accidentals||(e.Accidentals={})),(a=>{(i=>{i.NONE="?",i.DO="DO",i.DOS_REF="DO# REb",i.RE="RE",i.RES_MIF="RE# MIb",i.MI="MI",i.FA="FA",i.FAS_SOLF="FA# SOLb",i.SOL="SOL",i.SOLS_LAF="SOL# LAb",i.LA="LA",i.LAS_SIF="LA# SIb",i.SI="SI"})(a.ENotes||(a.ENotes={}))})(e.Classic||(e.Classic={})),(a=>{(i=>{i.NONE="?",i.C="C",i.CS_DF="C# Db",i.D="D",i.DS_EF="D# Eb",i.E="E",i.F="F",i.FS_GF="F# Gb",i.G="G",i.GS_AF="G# Ab",i.A="A",i.AS_BF="A# Bb",i.B="B"})(a.ENotes||(a.ENotes={}))})(e.American||(e.American={}));let t=[new e(261.63,"DO","C"),new te(277.18,"DO# REb","C# Db"),new e(293.66,"RE","D"),new te(311.13,"RE# MIb","D# Eb"),new e(329.63,"MI","E"),new e(349.23,"FA","F"),new te(369.99,"FA# SOLb","F# Gb"),new e(392,"SOL","G"),new te(415.3,"SOL# LAb","G# Ab"),new e(440,"LA","A"),new te(466.16,"LA# SIb","A# Bb"),new e(493.88,"SI","B")];e.Notes=t,e.EmptyNote=new te(0);let n=[],s=[];const o=(a,i)=>Math.sqrt(a*i);e.FillMedFrequencys=(a,i,r)=>{for(let l=0;l<a.length;l++){{const u=l>0?a[l-1].frequency.main:a[a.length-1].frequency.main/2;a[l].frequency.min=o(u,a[l].frequency.main)}{const u=l<a.length-1?a[l+1].frequency.main:a[0].frequency.main*2;a[l].frequency.max=o(a[l].frequency.main,u)}a[l]instanceof te?(a[l].sharp=a[l-1],a[l].flat=a[l+1],r.push(a[l])):(i.push(a[l]),l<a.length-1&&!(a[l+1]instanceof te)&&r.push(e.EmptyNote))}},(0,e.FillMedFrequencys)(t,n,s),e.Naturals=n,e.Semis=s})(M||(M={}));var ue;(e=>{e.OCTAVE_CENTRAL=4,e.OCTAVE_RANGE={MIN:1,MAX:7};const t=(l,u)=>l/Math.pow(2,u),n=(l,u)=>l*Math.pow(2,u),s=(l,u)=>l==e.OCTAVE_CENTRAL?u:l<e.OCTAVE_CENTRAL?t(u,e.OCTAVE_CENTRAL-l):n(u,l-e.OCTAVE_CENTRAL);let o=[],a=[],i=[];for(let l=e.OCTAVE_RANGE.MIN;l<=e.OCTAVE_RANGE.MAX;l++){let u=[],c=[],v=[];M.Notes.forEach(f=>{const S=s(l,f.frequency.main);let b;f instanceof te?b=new te(S,f.name.classic,f.name.american):b=new M(S,f.name.classic,f.name.american),u.push(b)}),M.FillMedFrequencys(u,c,v),o.push(u),a.push(c),i.push(v)}const r=l=>Se.Clamp(l,e.OCTAVE_RANGE.MIN,e.OCTAVE_RANGE.MAX)-e.OCTAVE_RANGE.MIN;e.GetNotesAtOctave=l=>o[r(l)],e.GetNaturalsAtOctave=l=>a[r(l)],e.GetSemisAtOctave=l=>i[r(l)]})(ue||(ue={}));const Sa=ce({name:"Tuner",emits:["update:frequency","update:note","is-running","update:bad-frequency"],props:{showClassicSystem:{type:Boolean,default:!0},showAmericanSystem:{type:Boolean,default:!0}},setup(e,{emit:t,expose:n}){const s=C(null),o=C(null),a=C(0),i=C({note:M.EmptyNote,octave:0}),r=C(!1),l=C(!0),u=C(null),c=C(new Date),v=500,f=ga.YIN(),S=d=>{const g=Math.round(12*(Math.log(d/440)/Math.log(2)))+69,p=g%12,O=Math.floor(g/12)-1;if(Se.IsOnRange(ue.OCTAVE_RANGE.MIN,ue.OCTAVE_RANGE.MAX,O)){const F=M.Notes[p];return c.value=new Date,{note:F,octave:O}}return{note:M.EmptyNote,octave:-1}},b=()=>{if(!o.value||!s.value||!r.value)return;const d=o.value.fftSize,y=new Float32Array(d);o.value.getFloatTimeDomainData(y);const m=f(y);if(m){const g=S(m);g.octave==-1?new Date().getTime()-c.value.getTime()>v&&(l.value=!0,t("update:bad-frequency",!0)):(a.value=m,i.value=g,l.value=!1,t("update:note",i.value),t("update:frequency",m),t("update:bad-frequency",!1))}requestAnimationFrame(b)},h=async()=>{if(r.value)return;s.value=new AudioContext,o.value=s.value.createAnalyser(),o.value.fftSize=2048,u.value=await navigator.mediaDevices.getUserMedia({audio:!0}),s.value.createMediaStreamSource(u.value).connect(o.value),r.value=!0,t("is-running",!0),b()},A=()=>{s.value&&s.value.close(),r.value=!1,t("is-running",!1),u.value!=null&&u.value.getTracks().forEach(d=>{d.stop()})};return n({startTuner:h,stopTuner:A}),{frequency:a,note:i,startTuner:h,stopTuner:A,running:r,badFrequency:l}}}),wa=re({color:String,...gn(),...Ne(),...Mt(),...Sn(),...wn(),...bn(),...pn(),...Xe(),...Lt()},"VSheet"),Ge=Ee()({name:"VSheet",props:wa(),setup(e,t){let{slots:n}=t;const{themeClasses:s}=Tt(e),{backgroundColorClasses:o,backgroundColorStyles:a}=xt(_t(e,"color")),{borderClasses:i}=An(e),{dimensionStyles:r}=kt(e),{elevationClasses:l}=En(e),{locationStyles:u}=Cn(e),{positionClasses:c}=On(e),{roundedClasses:v}=Fn(e);return Qe(()=>E(e.tag,{class:["v-sheet",s.value,o.value,i.value,l.value,c.value,v.value,e.class],style:[a.value,r.value,u.value,e.style]},n)),{}}});function Be(e,t){return{x:e.x+t.x,y:e.y+t.y}}function ba(e,t){return{x:e.x-t.x,y:e.y-t.y}}function wt(e,t){if(e.side==="top"||e.side==="bottom"){const{side:n,align:s}=e,o=s==="left"?0:s==="center"?t.width/2:s==="right"?t.width:s,a=n==="top"?0:n==="bottom"?t.height:n;return Be({x:o,y:a},t)}else if(e.side==="left"||e.side==="right"){const{side:n,align:s}=e,o=n==="left"?0:n==="right"?t.width:n,a=s==="top"?0:s==="center"?t.height/2:s==="bottom"?t.height:s;return Be({x:o,y:a},t)}return Be({x:t.width/2,y:t.height/2},t)}const Xt={static:Ea,connected:Oa},pa=re({locationStrategy:{type:[String,Function],default:"static",validator:e=>typeof e=="function"||e in Xt},location:{type:String,default:"bottom"},origin:{type:String,default:"auto"},offset:[Number,String,Array]},"VOverlay-location-strategies");function Aa(e,t){const n=C({}),s=C();me&&Je(()=>!!(t.isActive.value&&e.locationStrategy),a=>{var i,r;$(()=>e.locationStrategy,a),ie(()=>{window.removeEventListener("resize",o),s.value=void 0}),window.addEventListener("resize",o,{passive:!0}),typeof e.locationStrategy=="function"?s.value=(i=e.locationStrategy(t,e,n))==null?void 0:i.updateLocation:s.value=(r=Xt[e.locationStrategy](t,e,n))==null?void 0:r.updateLocation});function o(a){var i;(i=s.value)==null||i.call(s,a)}return{contentStyles:n,updateLocation:s}}function Ea(){}function Ca(e,t){const n=Qn(e);return t?n.x+=parseFloat(e.style.right||0):n.x-=parseFloat(e.style.left||0),n.y-=parseFloat(e.style.top||0),n}function Oa(e,t,n){(Array.isArray(e.target.value)||aa(e.target.value))&&Object.assign(n.value,{position:"fixed",top:0,[e.isRtl.value?"right":"left"]:0});const{preferredAnchor:o,preferredOrigin:a}=Pn(()=>{const b=ft(t.location,e.isRtl.value),h=t.origin==="overlap"?b:t.origin==="auto"?$e(b):ft(t.origin,e.isRtl.value);return b.side===h.side&&b.align===Ve(h).align?{preferredAnchor:vt(b),preferredOrigin:vt(h)}:{preferredAnchor:b,preferredOrigin:h}}),[i,r,l,u]=["minWidth","minHeight","maxWidth","maxHeight"].map(b=>N(()=>{const h=parseFloat(t[b]);return isNaN(h)?1/0:h})),c=N(()=>{if(Array.isArray(t.offset))return t.offset;if(typeof t.offset=="string"){const b=t.offset.split(" ").map(parseFloat);return b.length<2&&b.push(0),b}return typeof t.offset=="number"?[t.offset,0]:[0,0]});let v=!1;const f=new ResizeObserver(()=>{v&&S()});$([e.target,e.contentEl],(b,h)=>{let[A,d]=b,[y,m]=h;y&&!Array.isArray(y)&&f.unobserve(y),A&&!Array.isArray(A)&&f.observe(A),m&&f.unobserve(m),d&&f.observe(d)},{immediate:!0}),ie(()=>{f.disconnect()});function S(){if(v=!1,requestAnimationFrame(()=>v=!0),!e.target.value||!e.contentEl.value)return;const b=Xn(e.target.value),h=Ca(e.contentEl.value,e.isRtl.value),A=Me(e.contentEl.value),d=12;A.length||(A.push(document.documentElement),e.contentEl.value.style.top&&e.contentEl.value.style.left||(h.x-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-x")||0),h.y-=parseFloat(document.documentElement.style.getPropertyValue("--v-body-scroll-y")||0)));const y=A.reduce((q,P)=>{const R=P.getBoundingClientRect(),x=new de({x:P===document.documentElement?0:R.x,y:P===document.documentElement?0:R.y,width:P.clientWidth,height:P.clientHeight});return q?new de({x:Math.max(q.left,x.left),y:Math.max(q.top,x.top),width:Math.min(q.right,x.right)-Math.max(q.left,x.left),height:Math.min(q.bottom,x.bottom)-Math.max(q.top,x.top)}):x},void 0);y.x+=d,y.y+=d,y.width-=d*2,y.height-=d*2;let m={anchor:o.value,origin:a.value};function g(q){const P=new de(h),R=wt(q.anchor,b),x=wt(q.origin,P);let{x:V,y:T}=ba(R,x);switch(q.anchor.side){case"top":T-=c.value[0];break;case"bottom":T+=c.value[0];break;case"left":V-=c.value[0];break;case"right":V+=c.value[0];break}switch(q.anchor.align){case"top":T-=c.value[1];break;case"bottom":T+=c.value[1];break;case"left":V-=c.value[1];break;case"right":V+=c.value[1];break}return P.x+=V,P.y+=T,P.width=Math.min(P.width,l.value),P.height=Math.min(P.height,u.value),{overflows:gt(P,y),x:V,y:T}}let p=0,O=0;const F={x:0,y:0},w={x:!1,y:!1};let I=-1;for(;!(I++>10);){const{x:q,y:P,overflows:R}=g(m);p+=q,O+=P,h.x+=q,h.y+=P;{const x=dt(m.anchor),V=R.x.before||R.x.after,T=R.y.before||R.y.after;let U=!1;if(["x","y"].forEach(D=>{if(D==="x"&&V&&!w.x||D==="y"&&T&&!w.y){const G={anchor:{...m.anchor},origin:{...m.origin}},Z=D==="x"?x==="y"?Ve:$e:x==="y"?$e:Ve;G.anchor=Z(G.anchor),G.origin=Z(G.origin);const{overflows:oe}=g(G);(oe[D].before<=R[D].before&&oe[D].after<=R[D].after||oe[D].before+oe[D].after<(R[D].before+R[D].after)/2)&&(m=G,U=w[D]=!0)}}),U)continue}R.x.before&&(p+=R.x.before,h.x+=R.x.before),R.x.after&&(p-=R.x.after,h.x-=R.x.after),R.y.before&&(O+=R.y.before,h.y+=R.y.before),R.y.after&&(O-=R.y.after,h.y-=R.y.after);{const x=gt(h,y);F.x=y.width-x.x.before-x.x.after,F.y=y.height-x.y.before-x.y.after,p+=x.x.before,h.x+=x.x.before,O+=x.y.before,h.y+=x.y.before}break}const Y=dt(m.anchor);return Object.assign(n.value,{"--v-overlay-anchor-origin":`${m.anchor.side} ${m.anchor.align}`,transformOrigin:`${m.origin.side} ${m.origin.align}`,top:ae(je(O)),left:e.isRtl.value?void 0:ae(je(p)),right:e.isRtl.value?ae(je(-p)):void 0,minWidth:ae(Y==="y"?Math.min(i.value,b.width):i.value),maxWidth:ae(bt(mt(F.x,i.value===1/0?0:i.value,l.value))),maxHeight:ae(bt(mt(F.y,r.value===1/0?0:r.value,u.value)))}),{available:F,contentBox:h}}return $(()=>[o.value,a.value,t.offset,t.minWidth,t.minHeight,t.maxWidth,t.maxHeight],()=>S()),Ze(()=>{const b=S();if(!b)return;const{available:h,contentBox:A}=b;A.height>h.y&&requestAnimationFrame(()=>{S(),requestAnimationFrame(()=>{S()})})}),{updateLocation:S}}function je(e){return Math.round(e*devicePixelRatio)/devicePixelRatio}function bt(e){return Math.ceil(e*devicePixelRatio)/devicePixelRatio}let ze=!0;const qe=[];function Fa(e){!ze||qe.length?(qe.push(e),Ye()):(ze=!1,e(),Ye())}let pt=-1;function Ye(){cancelAnimationFrame(pt),pt=requestAnimationFrame(()=>{const e=qe.shift();e&&e(),qe.length?Ye():ze=!0})}const Pe={none:null,close:Ma,block:La,reposition:Ta},Pa=re({scrollStrategy:{type:[String,Function],default:"block",validator:e=>typeof e=="function"||e in Pe}},"VOverlay-scroll-strategies");function Ra(e,t){if(!me)return;let n;Ke(async()=>{n==null||n.stop(),t.isActive.value&&e.scrollStrategy&&(n=qt(),await new Promise(s=>setTimeout(s)),n.active&&n.run(()=>{var s;typeof e.scrollStrategy=="function"?e.scrollStrategy(t,e,n):(s=Pe[e.scrollStrategy])==null||s.call(Pe,t,e,n)}))}),ie(()=>{n==null||n.stop()})}function Ma(e){function t(n){e.isActive.value=!1}Qt(e.targetEl.value??e.contentEl.value,t)}function La(e,t){var i;const n=(i=e.root.value)==null?void 0:i.offsetParent,s=[...new Set([...Me(e.targetEl.value,t.contained?n:void 0),...Me(e.contentEl.value,t.contained?n:void 0)])].filter(r=>!r.classList.contains("v-overlay-scroll-blocked")),o=window.innerWidth-document.documentElement.offsetWidth,a=(r=>tt(r)&&r)(n||document.documentElement);a&&e.root.value.classList.add("v-overlay--scroll-blocked"),s.forEach((r,l)=>{r.style.setProperty("--v-body-scroll-x",ae(-r.scrollLeft)),r.style.setProperty("--v-body-scroll-y",ae(-r.scrollTop)),r!==document.documentElement&&r.style.setProperty("--v-scrollbar-offset",ae(o)),r.classList.add("v-overlay-scroll-blocked")}),ie(()=>{s.forEach((r,l)=>{const u=parseFloat(r.style.getPropertyValue("--v-body-scroll-x")),c=parseFloat(r.style.getPropertyValue("--v-body-scroll-y")),v=r.style.scrollBehavior;r.style.scrollBehavior="auto",r.style.removeProperty("--v-body-scroll-x"),r.style.removeProperty("--v-body-scroll-y"),r.style.removeProperty("--v-scrollbar-offset"),r.classList.remove("v-overlay-scroll-blocked"),r.scrollLeft=-u,r.scrollTop=-c,r.style.scrollBehavior=v}),a&&e.root.value.classList.remove("v-overlay--scroll-blocked")})}function Ta(e,t,n){let s=!1,o=-1,a=-1;function i(r){Fa(()=>{var c,v;const l=performance.now();(v=(c=e.updateLocation).value)==null||v.call(c,r),s=(performance.now()-l)/(1e3/60)>2})}a=(typeof requestIdleCallback>"u"?r=>r():requestIdleCallback)(()=>{n.run(()=>{Qt(e.targetEl.value??e.contentEl.value,r=>{s?(cancelAnimationFrame(o),o=requestAnimationFrame(()=>{o=requestAnimationFrame(()=>{i(r)})})):i(r)})})}),ie(()=>{typeof cancelIdleCallback<"u"&&cancelIdleCallback(a),cancelAnimationFrame(o)})}function Qt(e,t){const n=[document,...Me(e)];n.forEach(s=>{s.addEventListener("scroll",t,{passive:!0})}),ie(()=>{n.forEach(s=>{s.removeEventListener("scroll",t)})})}const xa=Symbol.for("vuetify:v-menu"),_a=re({closeDelay:[Number,String],openDelay:[Number,String]},"delay");function ka(e,t){let n=()=>{};function s(i){n==null||n();const r=Number(i?e.openDelay:e.closeDelay);return new Promise(l=>{n=Rn(r,()=>{t==null||t(i),l(i)})})}function o(){return s(!0)}function a(){return s(!1)}return{clearDelay:n,runOpenDelay:o,runCloseDelay:a}}const qa=re({target:[String,Object],activator:[String,Object],activatorProps:{type:Object,default:()=>({})},openOnClick:{type:Boolean,default:void 0},openOnHover:Boolean,openOnFocus:{type:Boolean,default:void 0},closeOnContentClick:Boolean,..._a()},"VOverlay-activator");function Na(e,t){let{isActive:n,isTop:s,contentEl:o}=t;const a=Ie("useActivator"),i=C();let r=!1,l=!1,u=!0;const c=N(()=>e.openOnFocus||e.openOnFocus==null&&e.openOnHover),v=N(()=>e.openOnClick||e.openOnClick==null&&!e.openOnHover&&!c.value),{runOpenDelay:f,runCloseDelay:S}=ka(e,w=>{w===(e.openOnHover&&r||c.value&&l)&&!(e.openOnHover&&n.value&&!s.value)&&(n.value!==w&&(u=!0),n.value=w)}),b=C(),h={onClick:w=>{w.stopPropagation(),i.value=w.currentTarget||w.target,n.value||(b.value=[w.clientX,w.clientY]),n.value=!n.value},onMouseenter:w=>{var I;(I=w.sourceCapabilities)!=null&&I.firesTouchEvents||(r=!0,i.value=w.currentTarget||w.target,f())},onMouseleave:w=>{r=!1,S()},onFocus:w=>{Mn(w.target,":focus-visible")!==!1&&(l=!0,w.stopPropagation(),i.value=w.currentTarget||w.target,f())},onBlur:w=>{l=!1,w.stopPropagation(),S()}},A=N(()=>{const w={};return v.value&&(w.onClick=h.onClick),e.openOnHover&&(w.onMouseenter=h.onMouseenter,w.onMouseleave=h.onMouseleave),c.value&&(w.onFocus=h.onFocus,w.onBlur=h.onBlur),w}),d=N(()=>{const w={};if(e.openOnHover&&(w.onMouseenter=()=>{r=!0,f()},w.onMouseleave=()=>{r=!1,S()}),c.value&&(w.onFocusin=()=>{l=!0,f()},w.onFocusout=()=>{l=!1,S()}),e.closeOnContentClick){const I=Nt(xa,null);w.onClick=()=>{n.value=!1,I==null||I.closeParents()}}return w}),y=N(()=>{const w={};return e.openOnHover&&(w.onMouseenter=()=>{u&&(r=!0,u=!1,f())},w.onMouseleave=()=>{r=!1,S()}),w});$(s,w=>{var I;w&&(e.openOnHover&&!r&&(!c.value||!l)||c.value&&!l&&(!e.openOnHover||!r))&&!((I=o.value)!=null&&I.contains(document.activeElement))&&(n.value=!1)}),$(n,w=>{w||setTimeout(()=>{b.value=void 0})},{flush:"post"});const m=yt();Ke(()=>{m.value&&Ze(()=>{i.value=m.el})});const g=yt(),p=N(()=>e.target==="cursor"&&b.value?b.value:g.value?g.el:Jt(e.target,a)||i.value),O=N(()=>Array.isArray(p.value)?void 0:p.value);let F;return $(()=>!!e.activator,w=>{w&&me?(F=qt(),F.run(()=>{Ia(e,a,{activatorEl:i,activatorEvents:A})})):F&&F.stop()},{flush:"post",immediate:!0}),ie(()=>{F==null||F.stop()}),{activatorEl:i,activatorRef:m,target:p,targetEl:O,targetRef:g,activatorEvents:A,contentEvents:d,scrimEvents:y}}function Ia(e,t,n){let{activatorEl:s,activatorEvents:o}=n;$(()=>e.activator,(l,u)=>{if(u&&l!==u){const c=r(u);c&&i(c)}l&&Ze(()=>a())},{immediate:!0}),$(()=>e.activatorProps,()=>{a()}),ie(()=>{i()});function a(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r(),u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;l&&Zn(l,j(o.value,u))}function i(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:r(),u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.activatorProps;l&&Kn(l,j(o.value,u))}function r(){let l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:e.activator;const u=Jt(l,t);return s.value=(u==null?void 0:u.nodeType)===Node.ELEMENT_NODE?u:void 0,s.value}}function Jt(e,t){var s,o;if(!e)return;let n;if(e==="parent"){let a=(o=(s=t==null?void 0:t.proxy)==null?void 0:s.$el)==null?void 0:o.parentNode;for(;a!=null&&a.hasAttribute("data-no-activator");)a=a.parentNode;n=a}else typeof e=="string"?n=document.querySelector(e):"$el"in e?n=e.$el:n=e;return n}function Da(){if(!me)return ge(!1);const{ssr:e}=Ln();if(e){const t=ge(!1);return Tn(()=>{t.value=!0}),t}else return ge(!0)}const $a=re({eager:Boolean},"lazy");function Va(e,t){const n=ge(!1),s=N(()=>n.value||e.eager||t.value);$(t,()=>n.value=!0);function o(){e.eager||(n.value=!1)}return{isBooted:n,hasContent:s,onAfterLeave:o}}function Zt(){const t=Ie("useScopeId").vnode.scopeId;return{scopeId:t?{[t]:""}:void 0}}const At=Symbol.for("vuetify:stack"),be=It([]);function Ba(e,t,n){const s=Ie("useStack"),o=!n,a=Nt(At,void 0),i=It({activeChildren:new Set});xn(At,i);const r=ge(+t.value);Je(e,()=>{var v;const c=(v=be.at(-1))==null?void 0:v[1];r.value=c?c+10:+t.value,o&&be.push([s.uid,r.value]),a==null||a.activeChildren.add(s.uid),ie(()=>{if(o){const f=kn(be).findIndex(S=>S[0]===s.uid);be.splice(f,1)}a==null||a.activeChildren.delete(s.uid)})});const l=ge(!0);o&&Ke(()=>{var v;const c=((v=be.at(-1))==null?void 0:v[0])===s.uid;setTimeout(()=>l.value=c)});const u=N(()=>!i.activeChildren.size);return{globalTop:_n(l),localTop:u,stackStyles:N(()=>({zIndex:r.value}))}}function ja(e){return{teleportTarget:N(()=>{const n=e();if(n===!0||!me)return;const s=n===!1?document.body:typeof n=="string"?document.querySelector(n):n;if(s==null)return;let o=[...s.children].find(a=>a.matches(".v-overlay-container"));return o||(o=document.createElement("div"),o.className="v-overlay-container",s.appendChild(o)),o})}}function Ua(){return!0}function Kt(e,t,n){if(!e||en(e,n)===!1)return!1;const s=Bt(t);if(typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&s.host===e.target)return!1;const o=(typeof n.value=="object"&&n.value.include||(()=>[]))();return o.push(t),!o.some(a=>a==null?void 0:a.contains(e.target))}function en(e,t){return(typeof t.value=="object"&&t.value.closeConditional||Ua)(e)}function Wa(e,t,n){const s=typeof n.value=="function"?n.value:n.value.handler;e.shadowTarget=e.target,t._clickOutside.lastMousedownWasOutside&&Kt(e,t,n)&&setTimeout(()=>{en(e,n)&&s&&s(e)},0)}function Et(e,t){const n=Bt(e);t(document),typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&t(n)}const Ha={mounted(e,t){const n=o=>Wa(o,e,t),s=o=>{e._clickOutside.lastMousedownWasOutside=Kt(o,e,t)};Et(e,o=>{o.addEventListener("click",n,!0),o.addEventListener("mousedown",s,!0)}),e._clickOutside||(e._clickOutside={lastMousedownWasOutside:!1}),e._clickOutside[t.instance.$.uid]={onClick:n,onMousedown:s}},beforeUnmount(e,t){e._clickOutside&&(Et(e,n=>{var a;if(!n||!((a=e._clickOutside)!=null&&a[t.instance.$.uid]))return;const{onClick:s,onMousedown:o}=e._clickOutside[t.instance.$.uid];n.removeEventListener("click",s,!0),n.removeEventListener("mousedown",o,!0)}),delete e._clickOutside[t.instance.$.uid])}};function Ga(e){const{modelValue:t,color:n,...s}=e;return E(Wn,{name:"fade-transition",appear:!0},{default:()=>[e.modelValue&&E("div",j({class:["v-overlay__scrim",e.color.backgroundColorClasses.value],style:e.color.backgroundColorStyles.value},s),null)]})}const tn=re({absolute:Boolean,attach:[Boolean,String,Object],closeOnBack:{type:Boolean,default:!0},contained:Boolean,contentClass:null,contentProps:null,disabled:Boolean,opacity:[Number,String],noClickAnimation:Boolean,modelValue:Boolean,persistent:Boolean,scrim:{type:[Boolean,String],default:!0},zIndex:{type:[Number,String],default:2e3},...qa(),...Ne(),...Mt(),...$a(),...pa(),...Pa(),...Lt(),...qn()},"VOverlay"),Ct=Ee()({name:"VOverlay",directives:{ClickOutside:Ha},inheritAttrs:!1,props:{_disableGlobalStack:Boolean,...tn()},emits:{"click:outside":e=>!0,"update:modelValue":e=>!0,afterEnter:()=>!0,afterLeave:()=>!0},setup(e,t){let{slots:n,attrs:s,emit:o}=t;const a=Ie("VOverlay"),i=C(),r=C(),l=C(),u=Dt(e,"modelValue"),c=N({get:()=>u.value,set:_=>{_&&e.disabled||(u.value=_)}}),{themeClasses:v}=Tt(e),{rtlClasses:f,isRtl:S}=Nn(),{hasContent:b,onAfterLeave:h}=Va(e,c),A=xt(N(()=>typeof e.scrim=="string"?e.scrim:null)),{globalTop:d,localTop:y,stackStyles:m}=Ba(c,_t(e,"zIndex"),e._disableGlobalStack),{activatorEl:g,activatorRef:p,target:O,targetEl:F,targetRef:w,activatorEvents:I,contentEvents:Y,scrimEvents:q}=Na(e,{isActive:c,isTop:y,contentEl:l}),{teleportTarget:P}=ja(()=>{var we,ut,ct;const _=e.attach||e.contained;if(_)return _;const X=((we=g==null?void 0:g.value)==null?void 0:we.getRootNode())||((ct=(ut=a.proxy)==null?void 0:ut.$el)==null?void 0:ct.getRootNode());return X instanceof ShadowRoot?X:!1}),{dimensionStyles:R}=kt(e),x=Da(),{scopeId:V}=Zt();$(()=>e.disabled,_=>{_&&(c.value=!1)});const{contentStyles:T,updateLocation:U}=Aa(e,{isRtl:S,contentEl:l,target:O,isActive:c});Ra(e,{root:i,contentEl:l,targetEl:F,isActive:c,updateLocation:U});function D(_){o("click:outside",_),e.persistent?le():c.value=!1}function G(_){return c.value&&d.value&&(!e.scrim||_.target===r.value||_ instanceof MouseEvent&&_.shadowTarget===r.value)}me&&$(c,_=>{_?window.addEventListener("keydown",Z):window.removeEventListener("keydown",Z)},{immediate:!0}),In(()=>{me&&window.removeEventListener("keydown",Z)});function Z(_){var X,we;_.key==="Escape"&&d.value&&(e.persistent?le():(c.value=!1,(X=l.value)!=null&&X.contains(document.activeElement)&&((we=g.value)==null||we.focus())))}const oe=Dn();Je(()=>e.closeOnBack,()=>{Hn(oe,_=>{d.value&&c.value?(_(!1),e.persistent?le():c.value=!1):_()})});const ye=C();$(()=>c.value&&(e.absolute||e.contained)&&P.value==null,_=>{if(_){const X=ta(i.value);X&&X!==document.scrollingElement&&(ye.value=X.scrollTop)}});function le(){e.noClickAnimation||l.value&&Jn(l.value,[{transformOrigin:"center"},{transform:"scale(1.03)"},{transformOrigin:"center"}],{duration:150,easing:ea})}function dn(){o("afterEnter")}function mn(){h(),o("afterLeave")}return Qe(()=>{var _;return E(pe,null,[(_=n.activator)==null?void 0:_.call(n,{isActive:c.value,targetRef:w,props:j({ref:p},I.value,e.activatorProps)}),x.value&&b.value&&E($n,{disabled:!P.value,to:P.value},{default:()=>[E("div",j({class:["v-overlay",{"v-overlay--absolute":e.absolute||e.contained,"v-overlay--active":c.value,"v-overlay--contained":e.contained},v.value,f.value,e.class],style:[m.value,{"--v-overlay-opacity":e.opacity,top:ae(ye.value)},e.style],ref:i},V,s),[E(Ga,j({color:A,modelValue:c.value&&!!e.scrim,ref:r},q.value),null),E(Vn,{appear:!0,persisted:!0,transition:e.transition,target:O.value,onAfterEnter:dn,onAfterLeave:mn},{default:()=>{var X;return[Bn(E("div",j({ref:l,class:["v-overlay__content",e.contentClass],style:[R.value,T.value]},Y.value,e.contentProps),[(X=n.default)==null?void 0:X.call(n,{isActive:c})]),[[jn,c.value],[Un("click-outside"),{handler:D,closeConditional:G,include:()=>[g.value]}]])]}})])]})])}),{activatorEl:g,scrimEl:r,target:O,animateClick:le,contentEl:l,globalTop:d,localTop:y,updateLocation:U}}}),Ue=Symbol("Forwarded refs");function We(e,t){let n=e;for(;n;){const s=Reflect.getOwnPropertyDescriptor(n,t);if(s)return s;n=Object.getPrototypeOf(n)}}function za(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return e[Ue]=n,new Proxy(e,{get(o,a){if(Reflect.has(o,a))return Reflect.get(o,a);if(!(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))){for(const i of n)if(i.value&&Reflect.has(i.value,a)){const r=Reflect.get(i.value,a);return typeof r=="function"?r.bind(i.value):r}}},has(o,a){if(Reflect.has(o,a))return!0;if(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))return!1;for(const i of n)if(i.value&&Reflect.has(i.value,a))return!0;return!1},set(o,a,i){if(Reflect.has(o,a))return Reflect.set(o,a,i);if(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))return!1;for(const r of n)if(r.value&&Reflect.has(r.value,a))return Reflect.set(r.value,a,i);return!1},getOwnPropertyDescriptor(o,a){var r;const i=Reflect.getOwnPropertyDescriptor(o,a);if(i)return i;if(!(typeof a=="symbol"||a.startsWith("$")||a.startsWith("__"))){for(const l of n){if(!l.value)continue;const u=We(l.value,a)??("_"in l.value?We((r=l.value._)==null?void 0:r.setupState,a):void 0);if(u)return u}for(const l of n){const u=l.value&&l.value[Ue];if(!u)continue;const c=u.slice();for(;c.length;){const v=c.shift(),f=We(v.value,a);if(f)return f;const S=v.value&&v.value[Ue];S&&c.push(...S)}}}}})}const Ya=re({id:String,text:String,...Gn(tn({closeOnBack:!1,location:"end",locationStrategy:"connected",eager:!0,minWidth:0,offset:10,openOnClick:!1,openOnHover:!0,origin:"auto",scrim:!1,scrollStrategy:"reposition",transition:!1}),["absolute","persistent"])},"VTooltip"),he=Ee()({name:"VTooltip",props:Ya(),emits:{"update:modelValue":e=>!0},setup(e,t){let{slots:n}=t;const s=Dt(e,"modelValue"),{scopeId:o}=Zt(),a=zn(),i=N(()=>e.id||`v-tooltip-${a}`),r=C(),l=N(()=>e.location.split(" ").length>1?e.location:e.location+" center"),u=N(()=>e.origin==="auto"||e.origin==="overlap"||e.origin.split(" ").length>1||e.location.split(" ").length>1?e.origin:e.origin+" center"),c=N(()=>e.transition?e.transition:s.value?"scale-transition":"fade-transition"),v=N(()=>j({"aria-describedby":i.value},e.activatorProps));return Qe(()=>{const f=Ct.filterProps(e);return E(Ct,j({ref:r,class:["v-tooltip",e.class],style:e.style,id:i.value},f,{modelValue:s.value,"onUpdate:modelValue":S=>s.value=S,transition:c.value,absolute:!0,location:l.value,origin:u.value,persistent:!0,role:"tooltip",activatorProps:v.value,_disableGlobalStack:!0},o),{activator:n.activator,default:function(){var A;for(var S=arguments.length,b=new Array(S),h=0;h<S;h++)b[h]=arguments[h];return((A=n.default)==null?void 0:A.call(n,...b))??e.text}})}),za({},r)}}),Xa={class:"tuner-note text-primary d-flex ga-1"},Qa={class:"tuner-octave"},Ja={class:"text-body-1 text-right",style:{width:"7rem"}};function Za(e,t,n,s,o,a){return L(),H(Ge,{class:"d-flex flex-wrap justify-center ga-4 bg-background align-center my-4"},{default:k(()=>[e.running?(L(),H(he,{key:1,text:"Detener afinador",location:"start"},{activator:k(({props:i})=>[E(z,j(i,{icon:"mdi-stop",onClick:e.stopTuner}),null,16,["onClick"])]),_:1})):(L(),H(he,{key:0,text:"Iniciar afinador",location:"start"},{activator:k(({props:i})=>[E(z,j(i,{icon:"mdi-microphone",onClick:e.startTuner,color:"primary"}),null,16,["onClick"])]),_:1})),W("div",{class:"d-flex justify-center align-center ga-3",style:$t(`opacity: ${e.badFrequency?"0.5":"1"}`)},[W("div",Xa,[!e.showClassicSystem||e.showAmericanSystem?(L(),B("span",{key:0,class:He(`tuner-american tuner-${e.note.note.isNatural()?"natural":"semi"}`)},ee(e.note.note.name.american),3)):K("",!0),e.showClassicSystem?(L(),B("span",{key:1,class:He(`tuner-classic tuner-${e.note.note.isNatural()?"natural":"semi"}`)},ee(e.note.note.name.classic),3)):K("",!0),W("span",Qa,ee(e.note.octave),1)]),W("div",Ja,ee(e.frequency.toFixed(2))+" Hz ",1)],4)]),_:1})}const Ka=Ce(Sa,[["render",Za],["__scopeId","data-v-b4a8980d"]]),er={class:"text-center"},tr={key:0},nr={key:1},ar=ce({__name:"PianoKeyNatural",props:{note:{},playSound:{type:Function},stopSound:{type:Function},showClassicSystem:{type:Boolean,default:!0},showAmericanSystem:{type:Boolean,default:!0}},setup(e){return(t,n)=>(L(),H(z,{class:"piano-key key-white",onMousedown:n[0]||(n[0]=s=>t.playSound(t.note.frequency.main)),onMouseup:n[1]||(n[1]=s=>t.stopSound())},{default:k(()=>[W("div",er,[t.showClassicSystem?(L(),B("div",tr,ee(t.note.name.classic),1)):K("",!0),t.showAmericanSystem?(L(),B("div",nr,ee(t.note.name.american),1)):K("",!0)])]),_:1}))}}),rr=Ce(ar,[["__scopeId","data-v-175c0436"]]),or={key:0},sr={key:0},ir={key:1},lr={key:1},ur={key:0},cr={key:1},fr=ce({__name:"PianoKeySemiSF",props:{note:{},playSound:{type:Function},stopSound:{type:Function},showClassicSystem:{type:Boolean,default:!0},showAmericanSystem:{type:Boolean,default:!0},showSemiSharps:{type:Boolean,default:!0},showSemiFlats:{type:Boolean,default:!0}},setup(e){return(t,n)=>t.note!=se(M).EmptyNote?(L(),H(z,{key:0,class:"piano-key key-black",onMousedown:n[0]||(n[0]=s=>t.playSound(t.note.frequency.main)),onMouseup:n[1]||(n[1]=s=>t.stopSound())},{default:k(()=>[t.showSemiSharps?(L(),B("div",or,[t.showClassicSystem?(L(),B("div",sr,[ve(ee(t.note.sharp.name.classic),1),n[2]||(n[2]=W("span",{class:"accidental"},"#",-1))])):K("",!0),t.showAmericanSystem?(L(),B("div",ir,[ve(ee(t.note.sharp.name.american),1),n[3]||(n[3]=W("span",{class:"accidental"},"#",-1))])):K("",!0)])):K("",!0),t.showSemiFlats?(L(),B("div",lr,[t.showClassicSystem?(L(),B("div",ur,[ve(ee(t.note.flat.name.classic),1),n[4]||(n[4]=W("span",{class:"accidental"},"b",-1))])):K("",!0),t.showAmericanSystem?(L(),B("div",cr,[ve(ee(t.note.flat.name.american),1),n[5]||(n[5]=W("span",{class:"accidental"},"b",-1))])):K("",!0)])):K("",!0)]),_:1})):(L(),H(z,{key:1,class:"key-black empty"}))}}),vr=Ce(fr,[["__scopeId","data-v-87a5d0d1"]]),dr={key:0,class:"light-tail-indicator pressed"},mr=ce({__name:"PianoLightTail",props:{note:{default:()=>M.EmptyNote},listenedFrequency:{default:()=>note.frequency.main},pressedFrequency:{default:0},badFrequency:{type:Boolean,default:!0}},setup(e){let t;(a=>{a[a.INACTIVE=0]="INACTIVE",a[a.LISTENED=2]="LISTENED",a[a.IS_BAD_LISTENED=4]="IS_BAD_LISTENED",a[a.PRESSED=8]="PRESSED",a[a.LISTENED_PRESSED=10]="LISTENED_PRESSED",a[a.LISTENED_BAD=6]="LISTENED_BAD",a[a.LISTENED_PRESSED_BAD=14]="LISTENED_PRESSED_BAD"})(t||(t={}));const n=new Map([[0,"none"],[2,"listened"],[4,"none"],[8,"pressed"],[10,"glow"],[6,"listened-bad"],[14,"pressed-bad"]]);e.note;const s=C(50),o=C(0);return $(()=>e.badFrequency,()=>{e.badFrequency?o.value|=4:o.value&=-5}),$(()=>e.listenedFrequency,()=>{Se.IsOnRange(e.note.frequency.min,e.note.frequency.max,e.listenedFrequency)?o.value|=2:o.value&=-3,s.value=(o.value&2)==2?Se.Invlerp(e.note.frequency.min,e.note.frequency.max,e.listenedFrequency)*100:50}),$(()=>e.pressedFrequency,()=>{e.pressedFrequency==e.note.frequency.main?o.value|=8:o.value&=-9,console.log("tail",e.pressedFrequency,o.value)}),(a,i)=>(L(),B("div",{class:He(`light-tail ${a.note.isNatural()?"":"shrink"} ${se(n).get(o.value)}`)},[i[2]||(i[2]=W("div",{class:"light-tail-border left"},null,-1)),W("div",{class:"light-tail-indicator listened",style:$t(`left: ${s.value}%;`)},i[0]||(i[0]=[W("div",{class:"light-tail-indicator-point"},null,-1)]),4),o.value?(L(),B("div",dr,i[1]||(i[1]=[W("div",{class:"light-tail-indicator-point"},null,-1)]))):K("",!0),i[3]||(i[3]=W("div",{class:"light-tail-border right"},null,-1))],2))}}),yr=Ce(mr,[["__scopeId","data-v-9ebedba1"]]),nn=De.reduce((e,t)=>(e[t]={type:[Boolean,String,Number],default:!1},e),{}),an=De.reduce((e,t)=>{const n="offset"+et(t);return e[n]={type:[String,Number],default:null},e},{}),rn=De.reduce((e,t)=>{const n="order"+et(t);return e[n]={type:[String,Number],default:null},e},{}),Ot={col:Object.keys(nn),offset:Object.keys(an),order:Object.keys(rn)};function hr(e,t,n){let s=e;if(!(n==null||n===!1)){if(t){const o=t.replace(e,"");s+=`-${o}`}return e==="col"&&(s="v-"+s),e==="col"&&(n===""||n===!0)||(s+=`-${n}`),s.toLowerCase()}}const gr=["auto","start","end","center","baseline","stretch"],Sr=re({cols:{type:[Boolean,String,Number],default:!1},...nn,offset:{type:[String,Number],default:null},...an,order:{type:[String,Number],default:null},...rn,alignSelf:{type:String,default:null,validator:e=>gr.includes(e)},...Ne(),...Xe()},"VCol"),Ae=Ee()({name:"VCol",props:Sr(),setup(e,t){let{slots:n}=t;const s=N(()=>{const o=[];let a;for(a in Ot)Ot[a].forEach(r=>{const l=e[r],u=hr(a,r,l);u&&o.push(u)});const i=o.some(r=>r.startsWith("v-col-"));return o.push({"v-col":!i||!e.cols,[`v-col-${e.cols}`]:e.cols,[`offset-${e.offset}`]:e.offset,[`order-${e.order}`]:e.order,[`align-self-${e.alignSelf}`]:e.alignSelf}),o});return()=>{var o;return Vt(e.tag,{class:[s.value,e.class],style:e.style},(o=n.default)==null?void 0:o.call(n))}}}),it=["start","end","center"],on=["space-between","space-around","space-evenly"];function lt(e,t){return De.reduce((n,s)=>{const o=e+et(s);return n[o]=t(),n},{})}const wr=[...it,"baseline","stretch"],sn=e=>wr.includes(e),ln=lt("align",()=>({type:String,default:null,validator:sn})),br=[...it,...on],un=e=>br.includes(e),cn=lt("justify",()=>({type:String,default:null,validator:un})),pr=[...it,...on,"stretch"],fn=e=>pr.includes(e),vn=lt("alignContent",()=>({type:String,default:null,validator:fn})),Ft={align:Object.keys(ln),justify:Object.keys(cn),alignContent:Object.keys(vn)},Ar={align:"align",justify:"justify",alignContent:"align-content"};function Er(e,t,n){let s=Ar[e];if(n!=null){if(t){const o=t.replace(e,"");s+=`-${o}`}return s+=`-${n}`,s.toLowerCase()}}const Cr=re({dense:Boolean,noGutters:Boolean,align:{type:String,default:null,validator:sn},...ln,justify:{type:String,default:null,validator:un},...cn,alignContent:{type:String,default:null,validator:fn},...vn,...Ne(),...Xe()},"VRow"),Re=Ee()({name:"VRow",props:Cr(),setup(e,t){let{slots:n}=t;const s=N(()=>{const o=[];let a;for(a in Ft)Ft[a].forEach(i=>{const r=e[i],l=Er(a,i,r);l&&o.push(l)});return o.push({"v-row--no-gutters":e.noGutters,"v-row--dense":e.dense,[`align-${e.align}`]:e.align,[`justify-${e.justify}`]:e.justify,[`align-content-${e.alignContent}`]:e.alignContent}),o});return()=>{var o;return Vt(e.tag,{class:["v-row",s.value,e.class],style:e.style},(o=n.default)==null?void 0:o.call(n))}}}),Or=ce({__name:"PianoOctave",props:{octaveId:{default:()=>ue.OCTAVE_CENTRAL},currentFrequency:{default:0},badFrequency:{type:Boolean,default:!0},showClassicSystem:{type:Boolean,default:!0},showAmericanSystem:{type:Boolean,default:!0},showSemiSharps:{type:Boolean,default:!0},showSemiFlats:{type:Boolean,default:!0}},setup(e){const t=C(null),n=C(null),s=C("sine"),o=C(0),a=r=>{t.value==null&&(t.value=new(window.AudioContext||window.webkitAudioContext)),n.value=t.value.createOscillator(),n.value.type=s.value,n.value.frequency.setValueAtTime(r,t.value.currentTime),n.value.connect(t.value.destination),n.value.start(),o.value=r,console.log(o.value)},i=()=>{n.value&&(n.value.stop(),n.value=null),o.value=0};return(r,l)=>(L(),H(Ae,{class:"position-relative rounded-lg mt-4",xs:"12",sm:"6",md:"6",lg:"4",xl:"3",xxl:"3"},{default:k(()=>[E(Re,{class:"flex-nowrap piano-keys key-tails mx-0"},{default:k(()=>[(L(!0),B(pe,null,Oe(se(ue).GetNotesAtOctave(r.octaveId),u=>(L(),H(yr,{note:u,"listened-frequency":r.currentFrequency,"pressed-frequency":o.value,"bad-frequency":r.badFrequency},null,8,["note","listened-frequency","pressed-frequency","bad-frequency"]))),256))]),_:1}),E(Re,{class:"flex-nowrap piano-keys white-keys"},{default:k(()=>[(L(!0),B(pe,null,Oe(se(ue).GetNaturalsAtOctave(r.octaveId),u=>(L(),H(rr,{note:u,"play-sound":a,"stop-sound":i,"show-classic-system":r.showClassicSystem,"show-american-system":r.showAmericanSystem},null,8,["note","show-classic-system","show-american-system"]))),256))]),_:1}),E(Re,{class:"flex-nowrap piano-keys black-keys mt-6"},{default:k(()=>[(L(!0),B(pe,null,Oe(se(ue).GetSemisAtOctave(r.octaveId),u=>(L(),H(vr,{note:u,"play-sound":a,"stop-sound":i,"show-classic-system":r.showClassicSystem,"show-american-system":r.showAmericanSystem,"show-semi-sharps":r.showSemiSharps,"show-semi-flats":r.showSemiFlats},null,8,["note","show-classic-system","show-american-system","show-semi-sharps","show-semi-flats"]))),256))]),_:1}),E(Ae,{cols:"12",class:"piano-octave-id"},{default:k(()=>[ve(ee(r.octaveId),1)]),_:1})]),_:1}))}}),Fr=Ce(Or,[["__scopeId","data-v-274446fb"]]),Pr=ce({__name:"InstrumentSettings",emits:["octaves","show:noteSystems","show:noteSemis"],setup(e,{emit:t}){const n=t,s=C({min:3,max:5}),o=C([M.Systems.CLASSIC,M.Systems.AMERICAN]),a=C([M.Accidentals.SHARP,M.Accidentals.FLAT]);$(o,u=>{const c=u.indexOf(M.Systems.CLASSIC)!=-1,v=u.indexOf(M.Systems.AMERICAN)!=-1;n("show:noteSystems",c,v)}),$(a,u=>{const c=u.indexOf(M.Accidentals.SHARP)!=-1,v=u.indexOf(M.Accidentals.FLAT)!=-1;n("show:noteSemis",c,v)});const i=()=>{const u=s.value.max-s.value.min+1,c=Array.from(Array(u).keys()).map(v=>v+s.value.min);n("octaves",c)};i();const r=(u=!0)=>{u?s.value.min-=1:s.value.min+=1,i()},l=(u=!0)=>{u?s.value.max+=1:s.value.max-=1,i()};return(u,c)=>(L(),H(Re,{class:"px-3 mb-2 position-relative","no-gutters":"",style:{"z-index":"20"}},{default:k(()=>[E(Ae,{cols:"6",sm:"3",class:"d-flex align-center justify-start ga-2 order-1"},{default:k(()=>[E(he,{text:"Incluir una octava grave mÃ¡s",location:"top"},{activator:k(({props:v})=>[E(z,j(v,{variant:"tonal",disabled:s.value.min<=1,icon:"mdi-music-note-plus",onClick:c[0]||(c[0]=f=>r(!0))}),null,16,["disabled"])]),_:1}),E(he,{text:"Disminuir una octava grave",location:"right"},{activator:k(({props:v})=>[E(z,j(v,{size:"small",variant:"tonal",disabled:s.value.min>=s.value.max,icon:"mdi-music-note-minus",onClick:c[1]||(c[1]=f=>r(!1))}),null,16,["disabled"])]),_:1})]),_:1}),E(Ae,{cols:"12",sm:"6",class:"d-flex justify-space-evenly order-3 order-sm-2"},{default:k(()=>[E(ht,{multiple:"",modelValue:o.value,"onUpdate:modelValue":c[2]||(c[2]=v=>o.value=v),rounded:"xl",variant:"outlined"},{default:k(()=>[E(z,{value:se(M).Systems.CLASSIC},{default:k(()=>c[6]||(c[6]=[ve("Do, Re, ...")])),_:1},8,["value"]),E(z,{value:se(M).Systems.AMERICAN},{default:k(()=>c[7]||(c[7]=[ve("C, D, ...")])),_:1},8,["value"])]),_:1},8,["modelValue"]),E(ht,{multiple:"",modelValue:a.value,"onUpdate:modelValue":c[3]||(c[3]=v=>a.value=v),rounded:"xl",variant:"outlined"},{default:k(()=>[E(z,{icon:"mdi-music-accidental-sharp",value:se(M).Accidentals.SHARP},null,8,["value"]),E(z,{icon:"mdi-music-accidental-flat",value:se(M).Accidentals.FLAT},null,8,["value"])]),_:1},8,["modelValue"])]),_:1}),E(Ae,{cols:"6",sm:"3",class:"d-flex align-center justify-end ga-2 order-2 order-sm-3"},{default:k(()=>[E(he,{text:"Disminuir una octava aguda",location:"left"},{activator:k(({props:v})=>[E(z,j(v,{size:"small",variant:"tonal",disabled:s.value.min>=s.value.max,icon:"mdi-music-note-minus",onClick:c[4]||(c[4]=f=>l(!1))}),null,16,["disabled"])]),_:1}),E(he,{text:"Incluir una octava aguda mÃ¡s",location:"top"},{activator:k(({props:v})=>[E(z,j(v,{variant:"tonal",disabled:s.value.max>=7,icon:"mdi-music-note-plus",onClick:c[5]||(c[5]=f=>l(!0))}),null,16,["disabled"])]),_:1})]),_:1})]),_:1}))}}),Rr=ce({__name:"Piano",props:{currentFrequency:{default:0},badFrequency:{type:Boolean,default:!1}},setup(e){const t=C([]),n=C(!0),s=C(!0),o=C(!0),a=C(!0);return(i,r)=>(L(),H(Ge,{class:"bg-background"},{default:k(()=>[Yn(i.$slots,"default"),E(Pr,{onOctaves:r[0]||(r[0]=l=>{t.value=l}),"onShow:noteSystems":r[1]||(r[1]=(l,u)=>{n.value=l,s.value=u}),"onShow:noteSemis":r[2]||(r[2]=(l,u)=>{o.value=l,a.value=u})}),E(Ge,{class:"d-flex flex-wrap justify-center align-center ga-0 position-relative pa-2 pt-10",style:{"z-index":"10"}},{default:k(()=>[(L(!0),B(pe,null,Oe(t.value,l=>(L(),H(Fr,{octaveId:l,currentFrequency:i.currentFrequency,badFrequency:i.badFrequency,showClassicSystem:n.value,showAmericanSystem:s.value,showSemiSharps:o.value,showSemiFlats:a.value},null,8,["octaveId","currentFrequency","badFrequency","showClassicSystem","showAmericanSystem","showSemiSharps","showSemiFlats"]))),256))]),_:1})]),_:3}))}}),xr=ce({__name:"Home",setup(e){const t=C(0),n=C(!0),s=C(""),o=C(null),a=C(!1),i=l=>{t.value=l},r=l=>{s.value=l};return(l,u)=>(L(),H(Rr,{"current-frequency":t.value,"bad-frequency":n.value},{default:k(()=>[E(Ka,{ref_key:"tunerRef",ref:o,"onUpdate:frequency":i,"onUpdate:note":r,onIsRunning:u[0]||(u[0]=c=>a.value=c),"onUpdate:badFrequency":u[1]||(u[1]=c=>n.value=c)},null,512)]),_:1},8,["current-frequency","bad-frequency"]))}});export{xr as default};
